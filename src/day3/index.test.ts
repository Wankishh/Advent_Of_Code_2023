import {describe, expect, it} from "@jest/globals";
import {part1, part2} from "./index";
import {readFileSync} from "fs";

const input = `467..114..
...*......
..35..633.
......#...
617*......
.....+.58.
..592.....
......755.
...$.*....
.664.598..`;

describe('Day 3 - Part 1', () => {
    it('Should pass default case', () => {
        const sum = part1(input);
        expect(sum).toBe(4361);
    });

    it('Edge case with ending symbol diagonal', () => {
        const customEdgeCaseInput = `
467..114..
...*......
..35..633.
......#...
617*.....*
.....+.58.
..592.....
......755.
...$.*....
.664.598..`
        const sum = part1(customEdgeCaseInput);
        expect(sum).toBe(4361 + 58);
    });

    it('Real case from input', () => {
        const customEdgeCaseInput = `
.............*........36..........743.=.../...............*......*..424.................580.#...897.448....*.......833...633.....*...*......
.............963......................542........734.....901...914..........843.............523..........818..................691.....833...`;

        const sum = part1(customEdgeCaseInput.trim());
        // 963 + 542 + 901 + 914 +523+818+691+833
        expect(sum).toBe(963 + 542 + 901 + 914 + 523 + 818 + 691 + 833);
    });

    it('Real case from input 2', () => {
        const customEdgeCaseInput = `
.............*..........*.............=...23..............*......*..424.................580.#...897.448....*.......833...633.....*...*......
.............*........36..........743.=.../...............*......*..424.................580.#...897.448....*.......833...633.....*...*......
.............963......................542........734.....901...914..........843.............523..........818..................691.....833...`;

        const sum = part1(customEdgeCaseInput.trim());
        // 963 + 542 + 901 + 914 +523+818+691+833 + 36 + 23
        expect(sum).toBe(963 + 542 + 901 + 914 + 523 + 818 + 691 + 833 + 36 + 23);
    });

    it('Real case from input - 3', () => {
        const customEdgeCaseInput = `
.............*........36..........743.=.../...............*......*..424.................580.#...897.448....*.......833...633.....*...*....35
.............963......................542........734.....901...914..........843.............523..........818..................691.....833..*`;

        const sum = part1(customEdgeCaseInput.trim());
        // 963 + 542 + 901 + 914 +523+818+691+833 + 35
        expect(sum).toBe(963 + 542 + 901 + 914 + 523 + 818 + 691 + 833 + 35);
    });

    it('Should pass input case', () => {
        const input = readFileSync(__dirname + '/input.txt', 'utf8');
        const sum = part1(input);
        expect(sum).toBe(537732);
    });
});

describe('Day 3 - Part 2', () => {
    it('Should pass default case', () => {
        const sum = part2(input);
        expect(sum).toBe(467835);
    });

    it('Ege case from input', () => {
        const customEdgeCaseInput = `
........247.............-...........649.............*..*82..507...............*..................................504........................
.........*...........909...............*.....707..922..............701...213.833.866$.630...&..606+....................102.183@..*281.225...
...465.108...............772.....915.109..96.%...................../.....*.............*..685........155....811*...220.*...............*....`;
        const sum = part2(customEdgeCaseInput.trim());
        // (247 * 108) * (649 * 109);
        expect(sum).toBe(247 * 108 + 649 * 109);
    });

    it('Should pass input case - 2', () => {
        const input = `
.........*.....288......650............349*.......................%.609...................526.....655.....854....425..............531*......
..../....848....&..............505...........................594..........434.................@.......$68............767..............732...
.410...............585...............185........................*...91........773..579........454............757.....*....568..+742.........
..............................*70.......*......478............769....&.182.......%.*..................568......-.570.861....*...............
..............*993.48......893........835....*..*......*.................*..........798..473.........../....................965...691.......
...........306.......*............531.......938.200.335.432...343.....360......836......-...........*..........951.691..............*.......
...341*360............958............*.........................#.........../.....*.../........728..585.........*.............902=..696......
        `
        // (531 * 732) + (594 * 769) + (767 * 861) + (70 * 893) + (185 * 835) + (579 * 798) + ((568 * 965) + (993 * 306) + (478 * 200) + (182 * 360) + (48 * 958) + (691 * 696) + (341*360)
        const sum = part2(input.trim());
        expect(sum).toBe((531 * 732) + (594 * 769) + (767 * 861) + (70 * 893) + (185 * 835) + (579 * 798) + ((568 * 965) + (993 * 306) + (478 * 200) + (182 * 360) + (48 * 958) + (691 * 696) + (341 * 360)));
    });


    it('Should pass input case - 3', () => {
        const input = `
        ....100*101....
        `;
        expect(part2(input.trim())).toBe(100 * 101);
    });


    it('Should pass input case - 4', () => {
        const input = `
.....10........
.......*101....`;
        expect(part2(input.trim())).toBe(10 * 101);
    });

    it('Should pass input case - 5', () => {
        const input = `
........10.....
.......*102....`;
        expect(part2(input.trim())).toBe(10 * 102);
    });

    it('Should pass input case - 6', () => {
        const input = `
........10.....
.......*.102....`;
        expect(part2(input.trim())).toBe(0);
    });

    it('Should pass input case - 7', () => {
        const input = `
........10......
......1*.102....`;
        expect(part2(input.trim())).toBe(10);
    });

    it('Should pass input case - 8', () => {
        const input = `
........10@.....
......1*.102....`;
        expect(part2(input.trim())).toBe(10);
    });

    it('Should not return NaN', () => {
        const input = `
.652....&...........$.....*....................89...944.894................*....-............975.27...409*...978......./445.................
...*.538...........822.274.491.....-..........................572.........329.........*468......................&.......................213.
.47......568.......................706.....232....74..490............&965..........685................125...........................824*....`;
        // (652 * 47) + (468 * 685) + (824 + 213)
        expect(part2(input.trim())).toBe((652 * 47) + (468 * 685) + (824 * 213));
    })

    it('Should pass input case - 9', () => {
        const input = `
.......358..........31.....339.....669.............598......328.....575......................447..650..............964...........692........
...............415..*.........@......*...627*...................945*.............144/.506............................*......514...*...150...
.........182..+.....873.756.......737........784..568....667..............258........./.........741...........707*....84........520.........
..579...@.........$........*..........258.................*.........274..*.....739.......157./.....*580...........893.....696*........889...
.....*.........875.........173.........*..................109...896*......959...*........=...677...........&636.........................$...`;
        // (31 * 873) + (669 * 737) + (627 * 784) + (945 * 575) + (964 * 84) + (692 * 520) + (707 * 893) + (756 * 173) + (667 * 109) + (258 * 959) + (741 * 580) + (896 * 274)
        expect(part2(input.trim())).toBe((31 * 873) + (669 * 737) + (627 * 784) + (945 * 575) + (964 * 84) + (692 * 520) + (707 * 893) + (756 * 173) + (667 * 109) + (258 * 959) + (741 * 580) + (896 * 274));
    });


    it(`Should pass input case - 10`, () => {
        const input = `
...171..275............#.....................401....50.$.................43...............123.............../949..135..331.....@.495........
........*...48@.662.100...............590...*........#.566.....................15..../426.............774...............+...........*.......
...944.28.........*.....................*....307...........410.361....55..................24.447.*......*....787*...266....361.......161....`
        // (275 * 28) + (401 * 307) + (495 * 161)
        expect(part2(input.trim())).toBe((275 * 28) + (401 * 307) + (495 * 161));
    });

    it(`Should pass input case - 11`, () => {
        const input = `
...254....847............@........135......6.......529..........202......96...........840.........@........*...*.../.........998.......989..
.........*.....288......650............349*.......................%.609...................526.....655.....854....425..............531*......
..../....848....&..............505...........................594..........434.................@.......$68............767..............732...`;
        // (847 * 848) + (349 * 6) + (531 * 732)
        expect(part2(input.trim())).toBe((847 * 848) + (349 * 6) + (531 * 732));
    });

    it(`Should pass input case - 12`, () => {
       const input = `
.....#979....776..562.......@.....*........................#........363.....&....915..704....401....*...32*681.%261.......&.......351.......
896*.................*896...493.88....*.........622.............925*.................*....17*.......265..............893....................
....778.%222.......................873.872..........635@...852..........559........456..%......*128........179.......*............336*...... 
       `;
       // (32 * 681) + (896 * 778) + (562 * 896) + (363 * 925) + (915 * 456) + (401 * 17)
         expect(part2(input.trim())).toBe((32 * 681) + (896 * 778) + (562 * 896) + (363 * 925) + (704 * 456) + (401 * 17));
    });


    it('Should pass input case', () => {
        const input = readFileSync(__dirname + '/input.txt', 'utf8');
        const sum = part2(input);
        expect(sum).not.toBe(80231516);
        expect(sum).not.toBe(78181556);
        expect(sum).not.toBe(1302208746);
    });
});
